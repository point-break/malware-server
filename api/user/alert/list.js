import {User} from 'model'

export default (req, res, next) => {
  const {id: userQuery} = req.query
  if (!userQuery) {
    const error = new Error('User Id query parameter required')
    error.status = 400
    return next(error)
  }
  User
    .get(userQuery)
    .getJoin({alert: true})
    .then(user => {
      res
        .status(200)
        .jsonp(user.alert)
    })
    .catch(error => {
      error.status = 500
      next(error)
    })
}
