import {Alarm} from 'model'

export default (req, res, next) => {
  const searchQuery = {
    id: req.params.id
  }
  Alarm
    .filter(searchQuery)
    .then(alarm => {
      if (!alarm.length) {
        return res
          .status(404)
          .jsonp()
      }
      res
        .status(200)
        .jsonp(alarm[0])
    })
    .catch(error => {
      error.status = 500
      next(error)
    })
}
