import {User} from 'model'

export default (req, res, next) => {
  const {alarmId} = req.body
  if (!alarmId) {
    const error = new Error('Alarm Id body parameter required')
    error.status = 400
    return next(error)
  }
  User
    .get(res.locals.user.id)
    .removeRelation('alert', {id: alarmId})
    .then(() => {
      res
        .status(201)
        .send()
    })
    .catch(error => {
      error.status = 500
      next(error)
    })
}
