import {Location} from 'model'

export default (req, res, next) => {
  
  const {body: submission} = req
  
  
  
  console.log('test', req.body)
  
  submission['location'] = [
    parseFloat(submission['location'][1]),
    parseFloat(submission['location'][0])
  ]
  
  console.log('test', submission)
  
  new Location(submission)
    .save()
    .then((location) => {
      res
        .location('/api/location/' + location.id)
        .status(201)
        .jsonp(location)
    })
    .catch(error => {
      error.status = 500
      next(error)
    })
}
